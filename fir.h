#ifndef __FIR_H__
#define __FIR_H__

#include <stdlib.h>
#include <stdint.h>
#include <string.h>

#define BB_LPF_CUTOFF 220000
#define BB_LPF_TAP_NUM 127
static int16_t bb_lpf_coefs[BB_LPF_TAP_NUM] =
{
    -15,
    -51,
    -106,
    -152,
    -142,
    -48,
    111,
    263,
    321,
    251,
    103,
    -18,
    -31,
    53,
    142,
    147,
    57,
    -44,
    -64,
    11,
    102,
    111,
    24,
    -75,
    -84,
    9,
    107,
    106,
    -3,
    -109,
    -100,
    24,
    135,
    112,
    -33,
    -152,
    -114,
    55,
    182,
    122,
    -78,
    -213,
    -127,
    111,
    255,
    133,
    -153,
    -308,
    -137,
    215,
    382,
    142,
    -309,
    -496,
    -145,
    469,
    699,
    148,
    -815,
    -1192,
    -149,
    2178,
    4589,
    5611,
    4589,
    2178,
    -149,
    -1192,
    -815,
    148,
    699,
    469,
    -145,
    -496,
    -309,
    142,
    382,
    215,
    -137,
    -308,
    -153,
    133,
    255,
    111,
    -127,
    -213,
    -78,
    122,
    182,
    55,
    -114,
    -152,
    -33,
    112,
    135,
    24,
    -100,
    -109,
    -3,
    106,
    107,
    9,
    -84,
    -75,
    24,
    111,
    102,
    11,
    -64,
    -44,
    57,
    147,
    142,
    53,
    -31,
    -18,
    103,
    251,
    321,
    263,
    111,
    -48,
    -142,
    -152,
    -106,
    -51,
    -15
};

#define AUDIO_LPF_CUTOFF 19000
#define AUDIO_LPF_TAP_NUM 111
static int16_t audio_lpf_coefs[AUDIO_LPF_TAP_NUM] =
{
    23,
    14,
    9,
    -6,
    -31,
    -65,
    -104,
    -139,
    -162,
    -166,
    -146,
    -100,
    -37,
    33,
    94,
    133,
    137,
    103,
    36,
    -48,
    -129,
    -184,
    -195,
    -153,
    -64,
    54,
    171,
    256,
    280,
    229,
    108,
    -58,
    -231,
    -362,
    -410,
    -349,
    -181,
    62,
    325,
    537,
    631,
    561,
    317,
    -64,
    -506,
    -898,
    -1119,
    -1066,
    -673,
    66,
    1089,
    2276,
    3463,
    4476,
    5155,
    5395,
    5155,
    4476,
    3463,
    2276,
    1089,
    66,
    -673,
    -1066,
    -1119,
    -898,
    -506,
    -64,
    317,
    561,
    631,
    537,
    325,
    62,
    -181,
    -349,
    -410,
    -362,
    -231,
    -58,
    108,
    229,
    280,
    256,
    171,
    54,
    -64,
    -153,
    -195,
    -184,
    -129,
    -48,
    36,
    103,
    137,
    133,
    94,
    33,
    -37,
    -100,
    -146,
    -166,
    -162,
    -139,
    -104,
    -65,
    -31,
    -6,
    9,
    14,
    23
};

typedef struct fir_filter_t
{
    int16_t *psCoefs;
    int16_t *psData;
    uint32_t ulTaps;
    uint32_t ulLastIndex;
} fir_filter_t;

fir_filter_t *fir_init(int16_t *pusCoefs, uint32_t ulTaps);
void fir_cleanup(fir_filter_t *pFilter);
int16_t fir_filter(fir_filter_t *pFilter, int16_t sSample);

#endif